<!doctype html>
<html>
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/style.css">
</head>

<body>
  <h1 class=image-gallery>Image Gallery</h1>
    <main>
        <div>
          <form action="">
            <div class='details'>
              <input v-model='title' type="text" name='title' placeholder='Title' />
              <input v-model='description' type="text" name='description' placeholder='Description' />
              <input v-model='username' type="text" name='username' placeholder='Username' />
            </div>
            
            <input @change="handleChange" id='file' type="file" name='file' accept='image/*' class="inputfile">
            <label for="file"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17"><path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"></path></svg><span>Choose a file....</span></label>
            <button @click='handleClick' class='submit-btn'>Submit</button>
          </form>
        </div>      
        <div v-if="images.length > 0" class='images-container'>
            <div v-for="image in images" class='image-card' @click='openModal(image.id)' > 
                <img :src="image.url" class='image'>
                <p> {{image.title}}</p>
            </div>
        </div>
        <div v-else>No images to show</div> 
        
        <!-- <button @click='handleFetchMore' class="load-more-btn">Load More</button> -->
        <image-details :image-id='imageId' v-if='showModal'  v-on:close-modal="closeModal"></image-details>
        
    </main>

    <!-- Component -->

    <script id='image-details' type='text/x-template'>
        <div class="modal" id="modal" >
              <span id="closeModal" v-on:click="$emit('close-modal')">X</span>
              <img :src="image.url" class='image'>
              <p>{{image.title}}</p>
              <p>{{image.description}}</p> 
               <p>Uploaded by {{image.created_at}}</p> 

              <div>
                <h2>Please add comment</h2>
                <input v-model='name' type="text" name='name' placeholder='Username' />
                <input v-model='comment' type="text" name='comment' placeholder='Comment' />
                <button @click='handleClick'>Submit</button>
            </div>
            <div v-if="comments.length > 0" >
              <div v-for="com in comments"> 
                  <p> {{com.username}}: {{com.comment}}</p>
                 
              </div>
            </div>
          <div v-else>No comments to show</div> 
        </div>
        </div>
    </script>

    <script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
    <script src="/js/src/script.js"></script>
    <script src="/js/src/file-input.js"></script>
</body>
</html>
